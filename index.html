<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <!-- <script src="./getJSON.js"></script>-->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        

        <style>
            th{
                color:#fff;
            }

            .toggle{    display: none;
            }

            .foo td {
                padding: 1em;
                border: 1px solid black;
            }
            .myButton {
                background:url(./arrow.png) no-repeat;
                cursor:pointer;
                width: 20%;
                height: 20%;
            }

        </style>

</head>
<body>
        <table class="table table-striped">
            <tr  class="bg-info">
                <th></th>
                <th>URL</th>
                <th>totalUser</th>
                <th>totalRequest</th>
                <th>totalDuration</th>

            </tr>

            <tbody class="myTable">
                
            </tbody>
        </table>
<script>
            var myArray = [
                {'name':'Michael', 'age':'30', 'birthdate':'11/10/1989'},
                {'name':'Mila', 'age':'32', 'birthdate':'10/1/1989'},
                {'name':'Paul', 'age':'29', 'birthdate':'10/14/1990'},
                {'name':'Dennis', 'age':'25', 'birthdate':'11/29/1993'},
                {'name':'Tim', 'age':'27', 'birthdate':'3/12/1991'},
                {'name':'Erik', 'age':'24', 'birthdate':'10/31/1995'},
            ];

            var myArray1 = {"dataMethod":[{"URL":"/currentsetting.htm","data_id":{"3682946":["GET","203.6"]},"user_id":{"null":1},"duration":"203.6","count":1,"totalDuration":"203.6","totalUser":1,"maxDuration":"203.6"},{"URL":"/userApi/fleets/groups/%7Bgroup_id%7D/users","data_id":{"3682812":["DELETE","205.0"]},"user_id":{"2853":1},"duration":"205.0","count":1,"totalDuration":"205.0","totalUser":1,"maxDuration":"205.0"},{"URL":"/userApi/fleets/groups/%7Bgroup_id%7D/users","data_id":{"3682811":["POST","206.5"]},"user_id":{"2853":1},"duration":"206.5","count":1,"totalDuration":"206.5","totalUser":1,"maxDuration":"206.5"}],"dataURL":[{"URL":"/currentsetting.htm","data_id":{"3679746":"198.4","3679864":"196.4","3680706":"198.2","3680716":"202.7","3682946":"203.6"},"user_id":{"null":5},"duration":"203.6","count":5,"totalDuration":"999.30","totalUser":1,"maxDuration":"203.6"},{"URL":"/api/clockwork/undefined","data_id":{"3682906":"228.6","3682907":"267.6","3682908":"294.1","3682909":"313.6","3682910":"213.7","3682911":"204.6"},"user_id":{"33":2,"null":4},"duration":"204.6","count":6,"totalDuration":"1522.20","totalUser":1,"maxDuration":313.6},{"URL":"/userApi/fleets/work-order/5d750090-229c-11eb-9308-e751c4620f38","data_id":{"3682838":"190.2"},"user_id":{"null":1},"duration":"190.2","count":1,"totalDuration":"190.2","totalUser":1,"maxDuration":"190.2"},{"URL":"/userApi/fleets/work-order/b6d093c0-229b-11eb-b51c-9b558ed03ba9","data_id":{"3682837":"201.1"},"user_id":{"null":1},"duration":"201.1","count":1,"totalDuration":"201.1","totalUser":1,"maxDuration":"201.1"},{"URL":"/owa/auth/logon.aspx","data_id":{"3682835":"196.8"},"user_id":{"null":1},"duration":"196.8","count":1,"totalDuration":"196.8","totalUser":1,"maxDuration":"196.8"},{"URL":"/test","data_id":{"3682833":"265.5"},"user_id":{"null":1},"duration":"265.5","count":1,"totalDuration":"265.5","totalUser":1,"maxDuration":"265.5"},{"URL":"/userApi/fleets/work-order/0d440c50-f82c-11ea-9ba9-79990f4e24d7","data_id":{"3681952":"185.9","3682813":"217.1"},"user_id":{"2853":2},"duration":"217.1","count":2,"totalDuration":"403.00","totalUser":1,"maxDuration":"217.1"},{"URL":"/userApi/fleets/groups/%7Bgroup_id%7D/users","data_id":{"3681950":"208.9","3681951":"205.3","3682811":"206.5","3682812":"205.0"},"user_id":{"2853":4},"duration":"205.0","count":4,"totalDuration":"825.70","totalUser":1,"maxDuration":208.9},{"URL":"/userApi/fleets/groups/%7Bgroup_id%7D/cars","data_id":{"3681948":"217.2","3681949":"206.9","3682809":"208.5","3682810":"206.0"},"user_id":{"2853":4},"duration":"206.0","count":4,"totalDuration":"838.60","totalUser":1,"maxDuration":217.2},{"URL":"/userApi/fleets/groups/%7Bgroup_id%7D/cars/attach","data_id":{"3681947":"215.1","3682808":"208.2"},"user_id":{"2853":2},"duration":"208.2","count":2,"totalDuration":"423.30","totalUser":1,"maxDuration":215.1},{"URL":"/userApi/fleets/users/2770/delete","data_id":{"3681934":"215.8","3682795":"213.3"},"user_id":{"2853":2},"duration":"213.3","count":2,"totalDuration":"429.10","totalUser":1,"maxDuration":215.8},{"URL":"/api/clockwork/024e5916-d002-47e8-83f9-15ba0860c583/1501393","data_id":{"3682776":"206.7"},"user_id":{"21":1},"duration":"206.7","count":1,"totalDuration":"206.7","totalUser":1,"maxDuration":"206.7"},{"URL":"","data_id":{"3680707":"197.7"},"user_id":{"null":1},"duration":"197.7","count":1,"totalDuration":"197.7","totalUser":1,"maxDuration":"197.7"},{"URL":"/wp-content/plugins/wp-file-manager/readme.txt","data_id":{"3680606":"204.7"},"user_id":{"null":1},"duration":"204.7","count":1,"totalDuration":"204.7","totalUser":1,"maxDuration":"204.7"},{"URL":"/api/jsonws/invoke","data_id":{"3680603":"194.5"},"user_id":{"null":1},"duration":"194.5","count":1,"totalDuration":"194.5","totalUser":1,"maxDuration":"194.5"},{"URL":"/","data_id":{"3680601":"193.4","3680602":"194.3"},"user_id":{"null":2},"duration":"194.3","count":2,"totalDuration":"387.70","totalUser":1,"maxDuration":"194.3"},{"URL":"/api/clockwork/%7BapiKey%7D","data_id":{"3680288":"199.1","3680289":"203.0","3680290":"785.8"},"user_id":{"null":3},"duration":"785.8","count":3,"totalDuration":"1187.90","totalUser":1,"maxDuration":"785.8"}]};

        //     var myArray1 = {
        //     "dataMethod": {
        //         "POST": {
        //             "URL": "/providerApi/requestStatusCheck",
        //             "data_id": {
        //                 "3573147": [
        //                     {
        //                         "0": "3573147"
        //                     },
        //                     {
        //                         "2": "POST"
        //                     },
        //                     {
        //                         "3": "280.4"
        //                     }
        //                 ],
        //                 "3573147": [
        //                     {
        //                         "0": "3573147"
        //                     },
        //                     {
        //                         "2": "POST"
        //                     },
        //                     {
        //                         "3": "280.4"
        //                     }
        //                 ]
        //             },
        //             "user_id": {
        //                 "346": 1,
        //                 "346": 1,
        //                 "346": 1
        //             },
        //             "duration": "280.4",
        //             "count": 1,
        //             "totalDuration": "280.4",
        //             "totalUser": 2

        //         },
        //         "GET": {
        //             "URL": "/providerApi/userdetails",
        //             "data_id": {
        //                 "3573143": [
        //                     {
        //                         "0": "GET"
        //                     },
        //                     {
        //                         "1": "210.8"
        //                     }
        //                 ]
        //             },
        //             "user_id": {
        //                 "346": 1
        //             },
        //             "duration": "210.8",
        //             "count": 1,
        //             "totalDuration": "210.8",
        //             "totalUser": 2

        //         }
        //     },
        //     "dataURL": [
        //         {
        //             "URL": "/providerApi/requestStatusCheck",
        //              "data_id": [
        //                 {"data_id":"3573093", "duration":"231.0","method":"GET"},
        //                 {"data_id":"3573101", "duration":"245.1","method":"GET"},
        //                 {"data_id":"3573108", "duration":"245.9","method":"GET"},
        //                 {"data_id":"3573116", "duration":"474.1","method":"GET"},
        //                 {"data_id":"3573124", "duration":"259.4","method":"GET"},
        //                 {"data_id":"3573139", "duration":"269.8","method":"GET"},
        //                 {"data_id":"3573147", "duration":"280.4","method":"GET"}
        //             ],
        //             "user_id": [
        //                 {"user_id":"57", "count":"2"},
        //                 {"user_id":"23", "count":"3"},
        //                 {"user_id":"31", "count":"4"}
        //             ],
        //             "duration": "280.4",
        //             "count": 9,
        //             "totalDuration": "2005.70",
        //             "totalUser": 3
        //         },
        //          {
        //             "URL": "/providerApi/availableUpdate",
        //             "data_id": [
        //                 {"data_id":"3573096", "duration":"217.9","method":"GET"},
        //                 {"data_id":"3573104", "duration":"274.1","method":"GET"},
        //                 {"data_id":"3573106", "duration":"220.5","method":"GET"},
        //                 {"data_id":"3573121", "duration":"198.8","method":"GET"},
        //                 {"data_id":"3573129", "duration":"281.2","method":"GET"},
        //                 {"data_id":"3573144", "duration":"202.8","method":"GET"}
        //             ],
        //             "user_id": [
        //                 {"user_id":"57", "count":"2"},
        //                 {"user_id":"23", "count":"3"},
        //                 {"user_id":"31", "count":"3"}
        //             ],
        //             "duration": "202.8",
        //             "count": 8,
        //             "totalDuration": "1395.30",
        //             "totalUser": 3
        //         },
        //          {
        //             "URL": "/providerApi/incomingRequest",
        //             "data_id": [
        //                 {"data_id":"3573088", "duration":"227.3","method":"GET"},
        //                 {"data_id":"3573094", "duration":"232.4","method":"GET"},
        //                 {"data_id":"3573102", "duration":"227.4","method":"GET"},
        //                 {"data_id":"3573110", "duration":"224.4","method":"GET"},
        //                 {"data_id":"3573119", "duration":"234.9","method":"GET"},
        //                 {"data_id":"3573127", "duration":"204.8","method":"GET"},
        //                 {"data_id":"3573142", "duration":"200.3","method":"GET"}
        //             ],
        //             "user_id": [
        //                 {"user_id":"57", "count":"2"},
        //                 {"user_id":"23", "count":"3"},
        //                 {"user_id":"31", "count":"2"}
        //             ],
        //             "duration": "200.3",
        //             "count": 7,
        //             "totalDuration": "1551.50",
        //             "totalUser": 3
        //         }
        //         ]
            
        // };
        </script>
        <script>

        // let text = 'true';
        //     const getTxt = async () => {
        //         const res = await fetch('/consoleText.txt');
        //          text = await res.text()
        //         console.log("====================");

        //         console.log(text);
        //     }
        // getTxt();

        //     //const fs = require('fs');
        //     // var fs = require('fs');
        //     // //var fs = 42;


        //     // fs.readFile('./consoleText.txt', 'utf-8', (err, data) => {
        //     //   if (err) {
        //     //     throw err;
        //     //   }
        //     //       console.log("====================");

        //     //   console.log(data);
        //     // });

        //     console.log(text);


            
            
            buildTable(myArray,myArray1)


            $("button").click(function() {

                let fired_button = $(this).val();

                let arrayClass = fired_button.split(',');

                $('.'+arrayClass[0]).toggle();
                
                let elem1 = document.getElementsByClassName(arrayClass[1])[0];
                let theCSSprop1 = window.getComputedStyle(elem1,null).getPropertyValue("display");

                let elem2 = document.getElementsByClassName(arrayClass[2])[0];
                let theCSSprop2 = window.getComputedStyle(elem2,null).getPropertyValue("display");

                    if (theCSSprop1=='table-row'){
                        $('.toggle.'+arrayClass[1]).toggle();
                    }
                    if (theCSSprop2=='table-row'){
                        $('.toggle.'+arrayClass[2]).toggle();
                    }       
            });



            function buildTable(data,data2){
                var table = document.getElementsByClassName('myTable')[0];
                
                for(var i = 0; i < data2.dataURL.length; i++){
                    var row =   `<tr class="foo" id="b">
                                    <!--<td><button class="" value="b`+i+`,d`+i+`,c`+i+`">"+"</button></td>-->
                                    <td><button class="" value="b`+i+`,d`+i+`,c`+i+`">"+"</button></td>
                                    <td>${data2.dataURL[i].URL}</td>
                                    <td>${data2.dataURL[i].totalUser}</td>
                                    <td>${data2.dataURL[i].count}</td>
                                    <td>${data2.dataURL[i].totalDuration}</td>
                                </tr>
                              
                                <tr  class="bg-info toggle b`+i+`">                                  
                                    <th></th>
                                    <th><button class="" value="d`+i+`">"+"</button></th>
                                    <th>User_id</th>
                                    <th>CountRequest</th>
                                    <th></th>
                                </tr>`
                               
                    table.innerHTML += row;



                    for(var j = 0; j < data2.dataURL[i].user_id.length; j++){  
                        var row = `<tr class="toggle d`+i+`">
                                            <td></td>
                                            <td></td>
                                            <td>${data2.dataURL[i].user_id[j].user_id}</td>
                                            <td>${data2.dataURL[i].user_id[j].count}</td>
                                        </tr>`

                        table.innerHTML += row;

                    }              

                    var row =`<tr  class="bg-info toggle b`+i+` ">  
                                <th></th>
                                <th><button class="" value="c`+i+`">"+"</button></th>
                                <th>Data_id</th>
                                <th>Method</th>
                                <th>Duration</th>
                              </tr>`

                    table.innerHTML += row;

                    for(var j = 0; j < data2.dataURL[i].data_id.length; j++){  
                         var row =   `<tr class="toggle c`+i+`">
                                        <td></td>
                                        <td></td>
                                        <td><a href="https://sandbox.driveroo.com/admin/clockwork/${data2.dataURL[i].data_id[j].data_id}" target="_blank">${data2.dataURL[i].data_id[j].data_id}</td>
                                        <td>${data2.dataURL[i].data_id[j].method}</td>
                                       <td>${data2.dataURL[i].data_id[j].duration}</td>
                                    </tr>`

                    table.innerHTML += row;

                    }            
                }
            }

        </script>
</body>
</html>