<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
         <script src="./JSONvar.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        

        <style>
/*table*/
            th{
                color:#fff;
            }

            .toggle{    display: none;
            }

            .foo td {
                padding: 1em;
                border: 1px solid black;
            }
            .myButton {
                background:url(./arrow.png) no-repeat;
                cursor:pointer;
                width: 20%;
                height: 20%;
            }

/*tab*/
            body {font-family: Arial;}

            /* Style the tab */
            .tab {
                overflow: hidden;
                border: 1px solid #ccc;
                background-color: #f1f1f1;
            }

            /* Style the buttons inside the tab */
            .tab button {
                background-color: inherit;
                float: left;
                border: none;
                outline: none;
                cursor: pointer;
                padding: 14px 16px;
                transition: 0.3s;
                font-size: 17px;
            }

            /* Change background color of buttons on hover */
            .tab button:hover {
                background-color: #ddd;
            }

            /* Create an active/current tablink class */
            .tab button.active {
                background-color: #ccc;
            }

            /* Style the tab content */
            .tabcontent {
                display: none;
                /*padding: 6px 12px;*/
                border: 1px solid #ccc;
                border-top: none;
            }
            .table1{
                display: block;
            }

/*sort*/
            /*.table_sort table {
                border-collapse: collapse;
            }

            .table_sort th {
                color: #ffebcd;
                background: #008b8b;
                cursor: pointer;
            }

            .table_sort td,
            .table_sort th {
                width: 150px;
                height: 40px;
                text-align: center;
                border: 2px solid #846868;
            }

            .table_sort tbody tr:nth-child(even) {
                background: #e3e3e3;
            }
*/
            th.sorted[data-order="1"],
            th.sorted[data-order="-1"] {
                position: relative;
            }

            th.sorted[data-order="1"]::after,
            th.sorted[data-order="-1"]::after {
                right: 8px;
                position: absolute;
            }

            th.sorted[data-order="-1"]::after {
                content: "▼"
            }

            th.sorted[data-order="1"]::after {
                content: "▲"
            }

        </style>

</head>
<body>

    <div class="tab">
      <button class="tablinks" onclick="openCity(event, 'All')">All</button>
      <button class="tablinks" onclick="openCity(event, '404')">404</button>
      <button class="tablinks" onclick="openCity(event, '403')">403</button>
      <button class="tablinks" onclick="openCity(event, '500')">500</button>

    </div>
    <div id="All" class="tabcontent table1">
        <table class="table table-striped table_sort">
            <thead>
                <tr  class="bg-info">
                    <th></th>
                    <th>URL</th>
                    <th>totalUser</th>
                    <th>totalRequest</th>
                    <th>MaxDuration</th>

                </tr>
             </thead>

            <tbody class="myTable1">
                
            </tbody>
        </table>
    </div>
     <div id="404" class="tabcontent">
        <table class="table table-striped">
            <tr  class="bg-info">
                <th></th>
                <th>URL</th>
                <th>totalUser</th>
                <th>totalRequest</th>
                <th>totalDuration</th>

            </tr>

            <tbody class="myTable2">
                
            </tbody>
        </table>
    </div>
     <div id="403" class="tabcontent">
        <table class="table table-striped">
            <tr  class="bg-info">
                <th></th>
                <th>URL</th>
                <th>totalUser</th>
                <th>totalRequest</th>
                <th>totalDuration</th>

            </tr>

            <tbody class="myTable3">
                
            </tbody>
        </table>
    </div>
     <div id="500" class="tabcontent">
        <table class="table table-striped">
            <tr  class="bg-info">
                <th></th>
                <th>URL</th>
                <th>totalUser</th>
                <th>totalRequest</th>
                <th>totalDuration</th>

            </tr>

            <tbody class="myTable4">
                
            </tbody>
        </table>
    </div>
<!-- 
        <script>
            var myArray500 = {dataMethod:[{URL:"/admin/editService/150",data_id:{"3696361":["GET","263.7"]},user_id:{"32":1},duration:"263.7",count:1,totalDuration:"263.7",totalUser:1,maxDuration:"263.7"},{URL:"/admin/addServiceProcess",data_id:{"3696360":["POST","224.6"]},user_id:{"32":1},duration:"224.6",count:1,totalDuration:"224.6",totalUser:1,maxDuration:"224.6"}],dataURL:[{URL:"/admin/editService/150",data_id:[["3696359","GET","200","287.1","2020-11-2223:59:43","56.4","8","2020-11-2223:59:43","56.4","8"],["3696361","GET","200","263.7","2020-11-2223:59:59","25.1","8","2020-11-2223:59:59","25.1","8"]],user_id:[["32",2]],duration:"263.7",count:2,totalDuration:"550.80",totalUser:1,maxDuration:287.1},{URL:"/admin/addServiceProcess",data_id:[["3696349","POST","302","229.0","2020-11-2223:58:54","27.6","6","2020-11-2223:58:54","27.6","6"],["3696351","POST","302","219.6","2020-11-2223:58:56","15.6","6","2020-11-2223:58:56","15.6","6"],["3696353","POST","302","221.3","2020-11-2223:59:13","24.8","5","2020-11-2223:59:13","24.8","5"],["3696355","POST","302","218.0","2020-11-2223:59:16","19.6","5","2020-11-2223:59:16","19.6","5"],["3696360","POST","302","224.6","2020-11-2223:59:59","26.5","6","2020-11-2223:59:59","26.5","6"]],user_id:[["32",5]],duration:"224.6",count:5,totalDuration:"1112.50",totalUser:1,maxDuration:229},{URL:"/userApi/serviceList",data_id:[["3696323","POST","200","472.8","2020-11-2223:56:36","178.2","26","2020-11-2223:56:36","178.2","26"],["3696327","POST","200","399.0","2020-11-2223:56:41","143.0","25","2020-11-2223:56:41","143.0","25"],["3696336","POST","200","553.0","2020-11-2223:57:52","276.4","25","2020-11-2223:57:52","276.4","25"],["3696338","POST","200","414.9","2020-11-2223:57:57","160.3","25","2020-11-2223:57:57","160.3","25"],["3696344","POST","200","419.9","2020-11-2223:58:25","167.6","25","2020-11-2223:58:25","167.6","25"],["3696358","POST","200","439.6","2020-11-2223:59:20","169.7","23","2020-11-2223:59:20","169.7","23"]],user_id:[["2757",6]],duration:"439.6",count:6,totalDuration:"2699.20",totalUser:1,maxDuration:553},{URL:"/userApi/fleets/cars/assigned",data_id:[["3696314","GET","200","333.5","2020-11-2223:56:23","46.9","12","2020-11-2223:56:23","46.9","12"],["3696318","GET","200","294.1","2020-11-2223:56:24","50.0","10","2020-11-2223:56:24","50.0","10"],["3696321","GET","200","297.6","2020-11-2223:56:35","36.5","10","2020-11-2223:56:35","36.5","10"],["3696324","GET","200","298.9","2020-11-2223:56:40","60.0","10","2020-11-2223:56:40","60.0","10"],["3696335","GET","200","245.4","2020-11-2223:57:51","27.4","10","2020-11-2223:57:51","27.4","10"],["3696337","GET","200","244.5","2020-11-2223:57:57","25.4","10","2020-11-2223:57:57","25.4","10"],["3696343","GET","200","229.1","2020-11-2223:58:24","19.6","10","2020-11-2223:58:24","19.6","10"],["3696357","GET","200","295.1","2020-11-2223:59:19","73.7","11","2020-11-2223:59:19","73.7","11"]],user_id:[["2757",8]],duration:"295.1",count:8,totalDuration:"2238.20",totalUser:1,maxDuration:333.5},{URL:"/admin/editService/155",data_id:[["3696347","GET","200","578.3","2020-11-2223:58:37","34.8","8","2020-11-2223:58:37","34.8","8"],["3696352","GET","200","260.8","2020-11-2223:58:57","23.7","8","2020-11-2223:58:57","23.7","8"],["3696356","GET","200","252.5","2020-11-2223:59:17","22.9","8","2020-11-2223:59:17","22.9","8"]],user_id:[["32",3]],duration:"252.5",count:3,totalDuration:"1091.60",totalUser:1,maxDuration:578.3},{URL:"/admin/editService/154",data_id:[["3696348","GET","200","261.8","2020-11-2223:58:38","20.6","8","2020-11-2223:58:38","20.6","8"],["3696350","GET","200","260.6","2020-11-2223:58:54","22.3","8","2020-11-2223:58:54","22.3","8"],["3696354","GET","200","265.0","2020-11-2223:59:14","36.9","8","2020-11-2223:59:14","36.9","8"]],user_id:[["32",3]],duration:"265.0",count:3,totalDuration:"787.40",totalUser:1,maxDuration:"265.0"},{URL:"/admin/serviceTypes",data_id:[["3696329","GET","200","245.1","2020-11-2223:57:22","23.6","4","2020-11-2223:57:22","23.6","4"],["3696345","GET","200","250.2","2020-11-2223:58:29","20.8","4","2020-11-2223:58:29","20.8","4"],["3696346","GET","200","230.6","2020-11-2223:58:32","16.9","4","2020-11-2223:58:32","16.9","4"]],user_id:[["32",3]],duration:"230.6",count:3,totalDuration:"725.90",totalUser:1,maxDuration:250.2},{URL:"/admin/companies",data_id:[["3696330","GET","200","441.5","2020-11-2223:57:30","160.2","64","2020-11-2223:57:30","160.2","64"],["3696331","GET","200","325.0","2020-11-2223:57:33","71.4","40","2020-11-2223:57:33","71.4","40"],["3696334","GET","200","344.4","2020-11-2223:57:48","82.4","44","2020-11-2223:57:48","82.4","44"],["3696339","GET","200","306.5","2020-11-2223:57:59","63.8","28","2020-11-2223:57:59","63.8","28"],["3696342","GET","200","335.5","2020-11-2223:58:19","76.1","44","2020-11-2223:58:19","76.1","44"]],user_id:[["32",5]],duration:"335.5",count:5,totalDuration:"1752.90",totalUser:1,maxDuration:441.5},{URL:"/admin/companies/70",data_id:[["3696332","GET","200","363.7","2020-11-2223:57:37","74.0","16","2020-11-2223:57:37","74.0","16"],["3696333","POST","302","533.5","2020-11-2223:57:48","184.9","69","2020-11-2223:57:48","184.9","69"],["3696340","GET","200","794.1","2020-11-2223:58:03","99.1","16","2020-11-2223:58:03","99.1","16"],["3696341","POST","302","432.3","2020-11-2223:58:19","90.8","56","2020-11-2223:58:19","90.8","56"]],user_id:[["32",4]],duration:"432.3",count:4,totalDuration:"2123.60",totalUser:1,maxDuration:794.1},{URL:"/admin",data_id:[["3696328","GET","200","569.5","2020-11-2223:57:08","348.3","13","2020-11-2223:57:08","348.3","13"]],user_id:[["32",1]],duration:"569.5",count:1,totalDuration:"569.5",totalUser:1,maxDuration:"569.5"},{URL:"/userApi/userDetails",data_id:[["3696315","GET","200","419.2","2020-11-2223:56:23","131.6","9","2020-11-2223:56:23","131.6","9"],["3696317","GET","200","366.2","2020-11-2223:56:24","139.6","9","2020-11-2223:56:24","139.6","9"],["3696322","GET","200","446.3","2020-11-2223:56:35","115.3","9","2020-11-2223:56:35","115.3","9"],["3696326","GET","200","472.6","2020-11-2223:56:41","111.2","9","2020-11-2223:56:41","111.2","9"]],user_id:[["2757",4]],duration:"472.6",count:4,totalDuration:"1704.30",totalUser:1,maxDuration:"472.6"},{URL:"/userApi/requestStatusCheck",data_id:[["3696316","POST","200","440.6","2020-11-2223:56:23","103.9","3","2020-11-2223:56:23","103.9","3"],["3696319","POST","200","267.0","2020-11-2223:56:24","12.0","3","2020-11-2223:56:24","12.0","3"],["3696320","POST","200","281.6","2020-11-2223:56:35","26.1","3","2020-11-2223:56:35","26.1","3"],["3696325","POST","200","305.8","2020-11-2223:56:40","14.4","3","2020-11-2223:56:40","14.4","3"]],user_id:[["2757",4]],duration:"305.8",count:4,totalDuration:"1295.00",totalUser:1,maxDuration:440.6},{URL:"/",data_id:[["3696302","GET","302","187.9","2020-11-2216:41:52","0.0","0","2020-11-2216:41:52","0.0","0"],["3696303","GET","302","195.8","2020-11-2216:41:52","0.0","0","2020-11-2216:41:52","0.0","0"],["3696304","GET","302","194.2","2020-11-2217:21:43","0.0","0","2020-11-2217:21:43","0.0","0"],["3696305","GET","302","186.8","2020-11-2217:21:43","0.0","0","2020-11-2217:21:43","0.0","0"],["3696307","GET","302","186.8","2020-11-2218:19:36","0.0","0","2020-11-2218:19:36","0.0","0"],["3696308","GET","302","187.7","2020-11-2219:22:27","0.0","0","2020-11-2219:22:27","0.0","0"],["3696310","GET","302","187.9","2020-11-2220:38:13","0.0","0","2020-11-2220:38:13","0.0","0"],["3696311","POST","404","212.2","2020-11-2221:29:10","15.4","1","2020-11-2221:29:10","15.4","1"],["3696312","POST","404","196.0","2020-11-2221:39:52","0.0","0","2020-11-2221:39:52","0.0","0"],["3696313","POST","404","199.7","2020-11-2221:40:10","0.0","0","2020-11-2221:40:10","0.0","0"]],user_id:[["undefineduse",10]],duration:"199.7",count:10,totalDuration:"1935.00",totalUser:1,maxDuration:212.2},{URL:"/userApi/fleets/findings/b1e254d0-22a1-11eb-ace6-35264c35adea",data_id:[["3696309","GET","404","226.0","2020-11-2220:33:52","36.1","1","2020-11-2220:33:52","36.1","1"]],user_id:[["undefineduse",1]],duration:"226.0",count:1,totalDuration:"226.0",totalUser:1,maxDuration:"226.0"},{URL:"/api/jsonws/invoke",data_id:[["3696306","POST","404","210.8","2020-11-2217:56:47","15.4","1","2020-11-2217:56:47","15.4","1"]],user_id:[["undefineduse",1]],duration:"210.8",count:1,totalDuration:"210.8",totalUser:1,maxDuration:"210.8"}]};

            var myArray404 = {"dataMethod":[{"URL":"/providerApi/incomingRequest","data_id":{"3684765":["POST","224.4"]},"user_id":{"440":1},"duration":"224.4","count":1,"totalDuration":"224.4","totalUser":1,"maxDuration":"224.4"}],"dataURL":[{"URL":"/providerApi/incomingRequest","data_id":[["3684617","POST",null,"242.8"],["3684636","POST",null,"205.4"],["3684641","POST",null,"248.4"],["3684650","POST",null,"236.7"],["3684656","POST",null,"228.7"],["3684674","POST",null,"219.8"],["3684712","POST",null,"220.3"],["3684718","POST",null,"215.1"],["3684765","POST",null,"224.4"]],"user_id":[["440",1]],"duration":"224.4","count":9,"totalDuration":"2041.60","totalUser":9,"maxDuration":248.4},{"URL":"/providerApi/requestStatusCheck","data_id":[["3684614","POST",null,"270.2"],["3684633","POST",null,"268.6"],["3684638","POST",null,"295.8"],["3684648","POST",null,"327.5"],["3684654","POST",null,"259.2"],["3684672","POST",null,"275.6"],["3684710","POST",null,"276.9"],["3684717","POST",null,"264.0"],["3684763","POST",null,"284.2"]],"user_id":[["440",1]],"duration":"284.2","count":9,"totalDuration":"2522.00","totalUser":9,"maxDuration":327.5},{"URL":"/userApi/fleets/reminders/2869","data_id":[["3684729","POST",null,"716.2"]],"user_id":[["1868",1]],"duration":"716.2","count":1,"totalDuration":"716.2","totalUser":1,"maxDuration":"716.2"},{"URL":"/providerApi/inspect/upload/cloud","data_id":[["3684685","POST",null,"1811.3"],["3684701","POST",null,"1200.6"],["3684720","POST",null,"639.1"],["3684721","POST",null,"763.3"]],"user_id":[["440",1]],"duration":"763.3","count":4,"totalDuration":"4414.30","totalUser":4,"maxDuration":1811.3},{"URL":"/providerApi/availableUpdate","data_id":[["3684715","POST",null,"212.6"]],"user_id":[["440",1]],"duration":"212.6","count":1,"totalDuration":"212.6","totalUser":1,"maxDuration":"212.6"},{"URL":"/userApi/serviceList","data_id":[["3684629","POST",null,"906.4"]],"user_id":[["2762",1]],"duration":"906.4","count":1,"totalDuration":"906.4","totalUser":1,"maxDuration":"906.4"},{"URL":"/userApi/inspect/cancelRequest","data_id":[["3684628","POST",null,"349.2"]],"user_id":[["2762",1]],"duration":"349.2","count":1,"totalDuration":"349.2","totalUser":1,"maxDuration":"349.2"},{"URL":"/userApi/requestStatusCheck","data_id":[["3684562","POST",null,"253.4"],["3684624","POST",null,"243.5"]],"user_id":[["2762",1]],"duration":"243.5","count":2,"totalDuration":"496.90","totalUser":2,"maxDuration":253.4},{"URL":"/userApi/inspect/start","data_id":[["3684576","POST",null,"1726.7"]],"user_id":[["2762",1]],"duration":"1726.7","count":1,"totalDuration":"1726.7","totalUser":1,"maxDuration":"1726.7"},{"URL":"/userApi/inspect","data_id":[["3684561","POST",null,"520.0"]],"user_id":[["2762",1]],"duration":"520.0","count":1,"totalDuration":"520.0","totalUser":1,"maxDuration":"520.0"}]};

        
        </script> -->
        <script>

//switch drop-down list           
            buildTable(myArrayAll,"myTable1");
            buildTable(myArray404,"myTable2");
            buildTable(myArray403,"myTable3");
            buildTable(myArray500,"myTable4");
            // buildTable(myArray500,myTable3);


            $("button").click(function() {

                let fired_button = $(this).val();

                let arrayClass = fired_button.split(',');

                $('.'+arrayClass[0]).toggle();
                
                let elem1 = document.getElementsByClassName(arrayClass[1])[0];
                let theCSSprop1 = window.getComputedStyle(elem1,null).getPropertyValue("display");

                let elem2 = document.getElementsByClassName(arrayClass[2])[0];
                let theCSSprop2 = window.getComputedStyle(elem2,null).getPropertyValue("display");

                    if (theCSSprop1=='table-row'){
                        $('.toggle.'+arrayClass[1]).toggle();
                    }
                    if (theCSSprop2=='table-row'){
                        $('.toggle.'+arrayClass[2]).toggle();
                    }       
            });



// create table
            function buildTable(data2,myTable){
                var table = document.getElementsByClassName(myTable)[0];
                
                for(var i = 0; i < data2.dataURL.length; i++){
                    var row =   `<tr class="foo" id="b">
                                    <!--<td><button class="" value="b`+i+`,d`+i+`,c`+i+`">"+"</button></td>-->
                                    <td><button class="" value="b`+i+`,d`+i+`,c`+i+`">"+"</button></td>
                                    <td>${data2.dataURL[i].URL}</td>
                                    <td>${data2.dataURL[i].totalUser}</td>
                                    <td>${data2.dataURL[i].count}</td>
                                    <td>${data2.dataURL[i].maxDuration}</td>
                                </tr>
                              
                                <thead><tr  class="bg-info toggle b`+i+`">                                  
                                    <th><button class="" value="d`+i+`">"+"</button></th>
                                    <th></th>
                                    <th>User_id</th>
                                    <th>CountRequest</th>
                                    <th></th>
                                </tr></thead>  `
                               
                    table.innerHTML += row;



                    for(var j = 0; j < data2.dataURL[i].user_id.length; j++){  
                        var row = `<tr class="toggle d`+i+`">
                                            <td></td>
                                            <th></th>
                                            <td>${data2.dataURL[i].user_id[j][0]}</td>
                                            <td>${data2.dataURL[i].user_id[j][1]}</td>
                                            <th></th>
                                        </tr>`

                        table.innerHTML += row;

                    }              

                    var row =`<thead><tr  class="bg-info toggle b`+i+` ">  
                                <th><button class="" value="c`+i+`">"+"</button></th>
                                <th>Data_id</th>
                                <th>Method</th>
                                <th>Response</th>
                                <th>Duration</th>
                              </tr><thead/>`

                    table.innerHTML += row;

                    for(var j = 0; j < data2.dataURL[i].data_id.length; j++){  
                         var row =   `<tr class="toggle c`+i+`">
                                        <td></td>
                                        <td><a href="https://sandbox.driveroo.com/admin/clockwork/${data2.dataURL[i].data_id[j][0]}" target="_blank">${data2.dataURL[i].data_id[j][0]}</td>
                                        <td>${data2.dataURL[i].data_id[j][1]}</td>
                                       <td>${data2.dataURL[i].data_id[j][2]}</td>
                                       <td>${data2.dataURL[i].data_id[j][3]}</td>
                                    </tr>`

                    table.innerHTML += row;

                    }            
                }
            }

// tab
            function openCity(evt, Name) {
                var i, tabcontent, tablinks;
                tabcontent = document.getElementsByClassName("tabcontent");
                for (i = 0; i < tabcontent.length; i++) {
                    tabcontent[i].style.display = "none";
                }
                tablinks = document.getElementsByClassName("tablinks");
                for (i = 0; i < tablinks.length; i++) {
                    tablinks[i].className = tablinks[i].className.replace(" active", "");
                }
                document.getElementById(Name).style.display = "block";
                evt.currentTarget.className += " active";
            }


// sort

            // document.addEventListener('DOMContentLoaded', () => {

            //     const getSort = ({ target }) => {
            //         console.log(JSON.stringify(target));
            //         const order = (target.dataset.order = -(target.dataset.order || -1));
            //         const index = [...target.parentNode.cells].indexOf(target);
            //         const collator = new Intl.Collator(['en', 'ru'], { numeric: true });
            //         const comparator = (index, order) => (a, b) => order * collator.compare(
            //             a.children[index].innerHTML,
            //             b.children[index].innerHTML
            //         );
                    
            //         for(const tBody of target.closest('table').tBodies)
            //             tBody.append(...[...tBody.rows].sort(comparator(index, order)));

            //         for(const cell of target.parentNode.cells)
            //             cell.classList.toggle('sorted', cell === target);
            //     };
                
            //     document.querySelectorAll('.table_sort thead').forEach(tableTH => tableTH.addEventListener('click', () => getSort(event)));
                
            // });

        </script>
</body>
</html>